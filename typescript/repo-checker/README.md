# Repo Checker

Sequence thats fetch data from various sides and saves it in topic.

___

## Description

This sequence supports retriveing data from those platforms:

* Docker Hub -Pull Count, Stars
* GitHub -Weekly Stars, Weekly Views
* PyPi -Weekly Downloads
* Npm - Weekly Downloads


## Prerequisites

> ❗ Remember to [setup transform-hub locally](https://docs.scramjet.org/platform/self-hosted-installation) or use the [platform's environment](https://docs.scramjet.org/platform/quick-start) for the sequence deployment.

As this apps is using github API, the key is required to use it. For informations how to get one please refer to [creating-personal-access-token](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token)


To get this app running you need to provide informations in a `data.json` file to match repositories you want to check

```json
{
    "gitHubRepos": [
        {
            "owner":"owner",
            "repo":"repository-name"
        }
    ],
    "dockerHubRepos": ["user/repo-name"],
    "pyPiRepos":["repo-name"],
    "npmRepos":["repo-name"]
}
```

Example data for testing :
```json
{
    "gitHubRepos": [
        {
            "owner":"scramjetorg",
            "repo":"transform-hub"
        }
    ],
    "dockerHubRepos": ["scramjetorg/pre-runner"],
    "pyPiRepos":["scramjet-api-client"],
    "npmRepos":["scramjet"]
}
```

> ❗ ❗ Currently all fields in json file are necessary to run this code. Not providing one or providing wrong value will result in no response.
## Running

Open the terminal and run the following commands:

```bash
# go to 'repo-checker' directory
cd typescript/repo-checker

# install dependencies
npm install

# transpile TS->JS to dist/
npm run build

# deploy the Sequence withh a following arguments where first one is a time interval in ms which determines how often to check for data and second is github api key
si seq deploy dist --args '[10000,"YOUR-GITHUB-API-KEY-HERE"]'

```

## Getting results

To get results run the following code in terminal:

``` bash
    # access data stored in topic which has been generated by sequence
    si topic get repo-data
```

This should result in a output with following style:

```
"{\"repoName\":\"scramjetorg/pre-runner\",\"repoType\":\"docker hub\",\"dataType\":\"total pulls\",\"number\":3321}"
```
